{% extends 'base.html' %}
{% block title %}{{ action }} Family Member{% endblock %}

{% block content %}
<div class="main-content" style="max-width: 700px;">
    <div style="margin-bottom: 1.5rem;">
        <a href="{% url 'member_list' %}" style="color: var(--text-muted); text-decoration: none; font-size: 0.9rem;">← Back to Family</a>
    </div>
    <h1 class="page-title" style="margin-bottom: 0.4rem;">{{ action }} Family Member</h1>
    <p class="page-subtitle" style="margin-bottom: 2rem;">
        {% if action == 'Add' %}Add a new member to track their health history{% else %}Update {{ member.name }}'s profile{% endif %}
    </p>

    <div class="card">
        <form method="post">
            {% csrf_token %}
            <div class="form-grid">
                <div class="form-group">
                    <label class="form-label">Full Name *</label>
                    <input type="text" name="name" class="form-control"
                        value="{{ form.name.value|default:'' }}" placeholder="e.g. Rahul Sharma" required>
                    {% if form.name.errors %}<div class="form-error">{{ form.name.errors|join:", " }}</div>{% endif %}
                </div>
                <div class="form-group">
                    <label class="form-label">Relation *</label>
                    <select name="relation" class="form-control" required>
                        {% for value, label in form.fields.relation.choices %}
                        <option value="{{ value }}" {% if form.relation.value == value %}selected{% endif %}>{{ label }}</option>
                        {% endfor %}
                    </select>
                    {% if form.relation.errors %}<div class="form-error">{{ form.relation.errors|join:", " }}</div>{% endif %}
                </div>
            </div>
            <div class="form-grid">
                <div class="form-group">
                    <label class="form-label">Date of Birth</label>
                    <input type="date" name="date_of_birth" class="form-control"
                        value="{{ form.date_of_birth.value|default:'' }}">
                </div>
                <div class="form-group">
                    <label class="form-label">Blood Group</label>
                    <select name="blood_group" class="form-control">
                        {% for value, label in form.fields.blood_group.choices %}
                        <option value="{{ value }}" {% if form.blood_group.value == value %}selected{% endif %}>{{ label }}</option>
                        {% endfor %}
                    </select>
                </div>
            </div>
            <div class="form-group">
                <label class="form-label">Notes (Optional)</label>
                <textarea name="notes" class="form-control" rows="3"
                    placeholder="Any general notes about this person's health...">{{ form.notes.value|default:'' }}</textarea>
            </div>
            <div style="display: flex; gap: 1rem; justify-content: flex-end; margin-top: 1rem;">
                <a href="{% url 'member_list' %}" class="btn btn-secondary">Cancel</a>
                <button type="submit" class="btn btn-primary">{{ action }} Member →</button>
            </div>
        </form>
    </div>
</div>
{% endblock %}
